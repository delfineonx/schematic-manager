
// === TEST ===
// https://drive.google.com/drive/folders/1KFe6-hy6LscoWC3XEu7RSdVBMwT_NTGu?usp=sharing

const schematicHex = "040000000E534D2D74657374320232080208020000002ABAD0010001E60B0130FE070001AA1001EC07C427000004020002B00B7B22706572736973746564223A7B22736861726564223A7B2274657874223A222F2F20436F707972696768742028632920323032352064656C66696E656F6E785C6E2F2F20436F707972696768742028632920323032352068616E7364696577757273745C6E2F2F20546869732070726F6475637420696E636C75646573205C22536368656D61746963204D616E616765725C2220637265617465642062792064656C66696E656F6E782E5C6E2F2F204C6963656E73656420756E6465722074686520417061636865204C6963656E73652C2056657273696F6E20322E302028746865205C224C6963656E73655C22292E5C6E5C6E636F6E736F6C652E6C6F67285C225C5C6E5B424554415D20536368656D61746963204D616E616765725C5C6E2D2062792064656C66696E656F6E78202D5C5C6E5C22293B5C6E222C22756E63656E736F72656454657874223A222F2F20436F707972696768742028632920323032352064656C66696E656F6E785C6E2F2F20436F707972696768742028632920323032352068616E7364696577757273745C6E2F2F20546869732070726F6475637420696E636C75646573205C22536368656D61746963204D616E616765725C2220637265617465642062792064656C66696E656F6E782E5C6E2F2F204C6963656E73656420756E6465722074686520417061636865204C6963656E73652C2056657273696F6E20322E302028746865205C224C6963656E73655C22292E5C6E5C6E636F6E736F6C652E6C6F67285C225C5C6E5B424554415D20536368656D61746963204D616E616765725C5C6E2D2062792064656C66696E656F6E78202D5C5C6E5C22293B5C6E222C227465787453697A65223A307D2C22617574686F72223A22734879564E724F6E72396F76336F3468444B746A35222C226275696C646572223A22734879564E724F6E72396F76336F3468444B746A35222C226275696C64657243616E45646974436F6465223A747275657D7D04000284097B22706572736973746564223A7B22736861726564223A7B226F776E657244624964223A22734879564E724F6E72396F76336F3468444B746A35222C22706173736B65794C61737455706461746564223A313736333538363435383732317D2C22706173736B6579223A2231343135222C226368657374537472223A225B7B5C226E616D655C223A5C22426F6F6B5C222C5C22616D6F756E745C223A6E756C6C2C5C22617474726962757465735C223A7B5C22637573746F6D417474726962757465735C223A7B5C2270616765735C223A5B5C226C6F6164696E672E2E2E5C222C5C225C222C5C225C222C5C225C222C5C225C222C5C225C222C5C225C222C5C225C222C5C225C222C5C225C225D2C5C22617574686F725C223A5C2264656C66696E656F6E785C222C5C226368616E676554696D655C223A313736333538393035333630367D2C5C22637573746F6D4465736372697074696F6E5C223A5C2262792064656C66696E656F6E785C222C5C22637573746F6D446973706C61794E616D655C223A5C22746573745C227D7D2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C2C6E756C6C5D227D7D003202320000";

const schematicObject = {};
SM.toObject(
  schematicHex,
  "objtest",
  schematicObject,
);
console.log(schematicObject);

schematicObject.name = "534D2D746573742D6E6577";  // SM-test-new
const chunk = schematicObject.chunks[0];
for (let i = 0; i < chunk.length; i++) {
  if (chunk[i] === 48) {
    chunk[i] = 995;
    break;
  }
}
const blockdatas = schematicObject.blockdatas;
for (let i = 0; i < blockdatas.length; i++) {
  if (blockdatas[i][0] === 2 && blockdatas[i][2] === 1) {
    blockdatas[i][3] = "7b22706572736973746564223a7b22736861726564223a7b226f776e657244624964223a22734879564e724f6e72396f76336f3468444b746a35222c22706173736b65794c61737455706461746564223a313736333538363435383732317d2c22706173736b6579223a2231343135222c226368657374537472223a225b7b5c226e616d655c223a5c22426f6f6b5c222c5c22616d6f756e745c223a6e756c6c2c5c22617474726962757465735c223a7b5c22637573746f6d417474726962757465735c223a7b5c2270616765735c223a5b5c226c6f6164696e672e2e2e5c5c6e5c5c6e5c5c6e3637252e2e2e5c222c5c225c222c5c225c222c5c225c222c5c225c222c5c225c222c5c225c222c5c225c222c5c225c222c5c225c225d2c5c22617574686f725c223a5c2264656c66696e656f6e785c222c5c226368616e676554696d655c223a313736333538393035333630367d2c5c22637573746f6d4465736372697074696f6e5c223a5c2262792064656c66696e656f6e785c222c5c22637573746f6d446973706c61794e616d655c223a5c22746573745c227d7d2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c2c6e756c6c5d227d7d";
    break;
  }
}

const newSchematicHex = { hex: null };
SM.toHex(schematicObject, "hextest", newSchematicHex);
console.log("\n", newSchematicHex.hex);
